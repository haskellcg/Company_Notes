## 1. 配置IPv4静态路由与静态BFD联动
  配置IPv4静态路由与静态BFD联动，可以快速感知从本地到路由目的地址的链路变化，提高网络可靠性。

## 2. 配置IPv6静态路由与静态BFD联动
  配置静态BFD检测IPv6静态路由，可以快速感知链路变化，提高网络可靠性。

  如果需要利用BFD会话为IPv6静态路由提供路由检测机制，可在IPv6静态路由上绑定BFD会话。一条IPv6静态路由可以绑定一条BFD会话。

  IPv6静态路由通过优选后下发到转发表，但IPv6静态路由本身并不能检测到所到达路由目的地址的链路是否正常，通过将IPv6静态路由绑定BFD会话，由BFD快速感应链路变化并及时通知路由管理，当链路中断时及时将依赖于该BFD的IPv6静态路由从转发表撤销并重新计算活跃路由，打到快速收敛的效果。

## 3. 配置RIP与BFD联动
  当网络中运行高速率数据业务时，通过配置BFD与RIP联动，可以实现RIP对网络中的故障快速做出响应。

### 3.1 配置RIP与动态BFD联动
  通常情况下，RIP通过定时接收发送更新报文来保持邻居关系，在老化定时器时间内没有收到邻居发送的更新报文则宣告邻居状态为Down。老化定时器的缺省值为180s，如果出现链路故障，RIP要进过180s才会检测到。如果网络中部署了高速数据业务，此期间将导致数据大量丢失。

  BFD能够提供毫秒级别的故障检测机制，及时检测到保护的链路或节点故障，并报上RIP协议，提高RIP进行对网络拓扑变化做出响应的速度，从而实现RIP路由的快速收敛。

  配置RIP与动态BFD联动有两种方式:
  * RIP进程下使能BFD，当网络中大部分RIP接口需要使能RIP与动态BFD联动时，建议选择此方式
  * RIP接口下使能BFD，当网络中只有小部分RIP接口需要使能RIP与动态BFD联动，建议选择此方式

### 3.2 配置RIP与静态BFD联动
  BFD能够提供轻负荷、快速的链路故障检测，配置RIP与静态BFD联动时实现BFD检测功能的一种方式。

  在RIP邻居间建立BFD会话可以快速检测链路故障，加快RIP进程对网络拓扑变化响应的速度。静态BFD可以实现一下两种功能：
  * 单臂BFD：在现网中存在大量设备不支持BFD功能，当支持BFD的设备与不支持BFD的设备对接，可以通过配置静态BFD来实现单臂BFD检测功能。
  * 普通BFD：在某些对故障响应速度要求高且两端设置都支持BFD的链路上，可以在两端配置静态BFD来实现普通BFD检测功能。

## 4. 配置OSPF与BFD联动
  如果需要提高链路状态变化时OSPF的收敛速度，可以在运行OSPF的链路上配置BFD特性。当BFD检测到链路故障时，能够将故障通告给路由协议，触法路由协议的快速收敛；当邻居关系位Down时，则动态删除BFD会话。

  OSPF通过周期性的向邻居发送Hello报文来实现邻居检测，检测到故障所需时间比较长，超过1秒中。随着科技的发展，语音、视频及其他点播业务广泛应用，而这些业务对于丢包和时延非常敏感，当数据达到Gbit速率时，较长的检测时间会导致大量数据丢失，无法满足电信级网络高可靠性的需求。

  为了解决上述问题，配置指定进程或指定接口的BFD for OSPF特性，可以快速检测链路的状态，故障检测时间可以达到毫秒级，提高链路状态变化时OSPF的收敛速度。

## 5. 配置OSPFv3与BFD联动
  如果用户需要实现链路上毫秒级的故障检测，并快速刷新路由表时，可以配置BFD。当BFD检测到链路故障时，能够将故障通告给路由协议，触发路由协议的快速收敛；当邻居关系为Down时，则动态删除BFD会话。

  网络故障时，OSPFv3可以通过BFD来实现路由的快速收敛。

  BFD能够跟踪网络链路的有效性，能够快速地检测出链路故障。当OSPFv3和BFD会话关联，BFD会把链路故障立即通告给OSPFv3，这样OSPFv3能够快速进行路由计算并在新的网络拓扑中进行路由收敛。

## 6. 配置OSPF IP FRR与BFD绑定
  配置OSPF IP FRR与BFD会话绑定可以达到快速感知故障的目的，确保故障后流量切换的及时性。

  配置OSPF IP FRR特性时，需要底层能够快速响应链路变化，当主链路故障时迅速将流量切换到备份链路。将OSPF IP FRR与BFD会话绑定可以达到快速感知故障的目的，确保故障后流量切换的及时性。

  OSPF IP FRR与BFD绑定可以在OSPF指定进程或指定接口上配置。在指定接口配置的BFD特性优先级高于指定进程配置的BFD特性优先级。如果打开了接口的BFD开关，则按照接口上BFD参数建立BFD会话。

## 7. 配置IS-IS与静态BFD联动
  在IS-IS网络中，IS-IS邻居之间通过定时发送Hello报文来感知邻居变化，缺省情况下当发送3个无效的Hello报文(30秒)之后，即认为邻居变为Down状态。对一些对网络收敛速度要求较高、且不能容忍丢包的网络来说，仅依赖IS-IS这种感觉链路故障的机制可靠性太低。为了解决上述问题，IS-IS协议引入了IS-IS与BFD联动功能。BFD检测时毫秒级别，可以快速感知IS-IS邻居之间链路的故障，因此能够提高IS-IS路由的收敛速度，保持链路快速切换，减少流量损失。

  与动态BFD相比，静态BFD有以下优缺点：
  * 静态BFD的优点时可以认为控制，部署比较灵活，为了节省内存，同时又保证关键链路的可靠性，可以在某些指定链路部署BFD，而其他链路不部署。
  * 静态BFD的缺点在于建立和删除BFD会话都需要手工触发，缺乏灵活性。而且有可能造成人为的配置错误。例如，如果配置了错误的本地标识符或者远程标识符，BFD会话将无法启动。

  目前，BFD会话不会感知路由切换，如果绑定的对端IP地址改变引起路由切换到其他链路上，除非源链路转发不通，否则，BFD不会重新协商。

## 8. 配置IS-IS与动态BFD联动
  同上。

  IS-IS与动态BFD联动由IS-IS协议动态触发建立BFD会话，即IS-IS在建立邻居关系时，将邻居的参数以及检测参数通告给BFD，BFD根据收到的参数建立起会话。

  动态BFD比静态BFD更具灵活性。动态BFD由路由协议动态触发BFD会话建立，避免了认为控制可能导致的配置错误，且配置简单，适用在全网需要配置BFD的情况。通过配置动态BFD特性，可以配合IS-IS更快检测到邻居状态变化，从而实现网络的快速收敛。

  同上。

  在接口配置BFD特性的优先级高于在进程中配置BFD特性的优先级。即打开接口BFD特性的开关后，建立BFD会话的参数以接口上的配置为准。

## 9. 配置IPv6 IS-IS与动态BFD联动
  当网络中需要运行高速率数据业务时，通过配置动态BFD for IPv6 IS-IS，可以实现IPv6 IS-IS对网络中故障的快速响应。

  交换机支持动态BFD for IPv6 IS-IS，不支持静态BFD for IPv6 IS-IS。

  在没有BFD检测的情况下，IS-IS智能依靠Hello消息超时才能感知IPv6链路故障。而Hello消息发送时间间隔最小为3秒，至少需要3个周期才能宣告邻居故障，因此IS-IS靠Hello消息感知邻居故障的时间位秒级，这将导致数据大量丢失。

  BFD能够提供毫秒级别的故障检测时间，及时检测到被保护的链路或节点故障，使流量切换到备份链路上。

## 10. 配置BGP与BFD联动
  BGP协议通过周期性的向对等体发送Keepalive报文来实现邻居检测。但这种机制检测到故障所需要的时间比较长，超过1秒钟。当数据达到GBit速率时，这么长的检测时间会导致大量数据丢失，无法满足电信级网络高可靠的需求。

  为了解决上述问题，BGP协议引入了BGP与BFD联动功能。BFD检测是毫秒级，可以在快速通报BGP对等体间链路的故障，因此能够提高BGP路由的收敛速度，保障链路快速切换，减少流量损失。

  当对等体加入对等体组，且这个对等体组使能了BFD功能，对等体将会继承对等体组的BFD特性，创建BFD会话。如果不希望对等体从对等体组继承BFD特性，可以配置peer bfd block命令，阻止对等体从对等体组中继承BFD功能。

  默认情况下，华为设备之间IBGP为多跳会话。建议华为设备和默认IBGP为单跳会话的其他厂商设备对接时，只配置IGP与BGP联动会话或者只配置IBGP与BFD联动会话。

## 11. 配置静态BFD检测LDP LSP
  通过配置静态BFD检测LDP LSP，实现快速检测LDP LSP链路的目的。这种方式需要人为控制，部署比较灵活。

  静态BFD检测LDP LSP时，有以下注意事项：
  * 只能在LDP LSP的Ingress进行BFD绑定
  * 一条LSP只能与一个BFD会话绑定
  * 只支持主机路由触发建立的LDP LDP
  * 往返转发方式可以不一致(如报文从源端到目的端使用LSP转发，从目的端到源端使用IP转发),但要求往返路径一致，如果不一致，则检测故障时，不能确定具体是哪条路径的故障。

## 12. 配置动态BFD检测LDP LSP
  配置动态BFD检测LDP LSP，不需要指定BFD参数，能够提高链路故障检测速度、减少配置工作量。这种方式配置简单，更具灵活性。

  动态BFD检测LDP LSP时，需要注意：
  * 只支持主机路由触发建立的LDP LSP
  * 往返转发方式可以不一致(如报文从源端到目的端使用LSP转发，从目的端到源端使用IP转发),但要求往返路径一致，如果不一致，则检测故障时，不能确定具体是哪条路径的故障。

## 13. 配置动态BFD for RSVP
  当PLR节点与其下游邻居之间存在二层设备时，可以通过动态BFD for RSVP来检测RSVP邻居之间的链路故障。

## 14. 配置静态BFD for CR-LSP
  配置静态BFD for CR-LSP，快速检测到CR-LSP的故障，并及时通知到转发层面，从而保证流量的快速切换。

## 15. 配置动态BFD for CR-LSP
  相对静态BFD for CR-LSP，配置动态BFD for CR-LSP可以减少配置的复杂性，减少人为的配置错误。

## 16. 配置静态BFD for TE
  配置静态BFD for TE检测整条TE隧道，可以触发VPN FRR、VLL FRR等应用在主隧道故障时进行快速流量切换，以减少对业务的影响。

## 17. 配置静态BFD检测PW
  使用静态BFD检测PW链路的故障，加快感知故障链路的速度，促使上层应用的快速切换。静态BFD检测使用与小型网络。

## 18. 配置动态BFD检测PW
  使用动态BFD检测PW链路的故障，不需要指定BFD参数，能够提高链路故障测试速度、减少配置工作量，促使上层应用的快速切换，这种方式适用于大型网络。

## 19. 配置BFD检测VSI PW
  在VPLS汇聚方案中，可以建立多个业务VSI PW通道，并将它们与一个管理VSI PW绑定。这样，通过BFD会话绑定该管理VSI PW，只需监控管理VSI PW的状态，即可实现对业务VSI的监控。

  BFD for VSI PW绑定的时缺省组播IP地址，该BFD会话必须建立在管理VSI PW上，因为只有管理VSI才处理组播BFD报文

## 20. 配置BFD与接口状态联动
  当直连链路中存在传输设备时，与接口本身的链路协议故障检测机制相比，BFD能够更快检测到链路故障。另外，对于Eth-Trunk或VLANIF等逻辑接口来说，链路协议状态是由成员接口的链路协议状态决定的。

  因此，为了将BFD检测结果更快地通知到应用程序，在设备接口管理模块中，为每个接口增加了一个属性，即BFD状态，指的是与该接口绑定的BFD会话的状态，系统根据接口的链路状态、协议状态和BFD状态决定接口的状态，并将结果通知给应用程序。

  该功能针对绑定出接口且使用缺省组播地址进行检测的单跳BFD会话。

## 21. 配置BFD与接口状态联动(触发与BFD联动的接口物理状态为Down)
  同上

## 22. 配置BFD与BFD联动
  配置BFD与BFD之间单向传递故障消息功能。

  配置该功能后，当bfd-session-1检测到故障后，将故障消息传递到bfd-session-2

## 23. 配置BFD与单板状态联动
  交换机做汇聚网关设备时，使能VRRP功能后，VRRP通告报文经过接入层的二层交换机转发。为了提升VRRP的倒换性能，使能VRRP联动BFD功能，此时BFD报文也是经过接入层的二层交换机转发。

  如果VRRP备份组的上行网络侧出口在同一单板上，当上行单板复位后，用户访问网络的流量因为没有出接口而转发失败，必须进行VRRP主备切换。但是因为BFD监控的链路时正常的，BFD会话不会down，因此无法满足毫秒级的倒换性能。使能BFD和单板联动功能，当上行单板复位后，BFD会话状态快速down，触发VRRP主备切换，提升切换性能。

## 24. 配置VRRP与BFD联动实现VRRP快速切换
  VRRP备份组故障时，Backup设备需要等待Master\_Down\_Interval定时器超时后才能感知故障并进行切换，切换时间通常在3秒以上，在等待切换期间内，业务流量仍会发往Master设备，此时会造成用户流量丢失。通过在Backup设备上配置VRRP联动BFD，使用BFD会话快速检测VRRP备份组间的通信故障，并在检测到故障时通知VRRP备份组提升高Backup设备的优先级，立即触发主备切换，实现毫秒级的切换速度，减少了流量的丢失。

  VRRP备份组故障恢复时，Backup设备在备份组中的优先级将恢复原来的值，原Master设备将重新抢占成为Master，继续承担流量转发的业务。

## 25. 配置VRRP与Peer BFD联动实现快速切换
  VRRP备份组故障时，Backup设备需要等待Master\_Down\_Interval定时器超时后才能感知故障并进行切换，切换时间通常在3秒以上，在等待切换期间内，业务流量仍会发往Master设备，此时会造成用户流量丢失。在SwitchA和SwitchB之间配置Peer BFD，使能BFD会话快速检测VRRP备份组间的通信故障，并在检测到故障时立即触发主备切换，实现毫秒级的切换速度，减少了流量的丢失。

  VRRP备份组故障恢复时，经过正常的VRRP协商后，SwitchA和SwitchB的VRRP备份组的状态恢复值故障发生前的状态。

  VRRP与Peer BFD联动仅支持联动静态和静态标识符自协商类型的BFD会话。

  配置VRRP与Peer BFD联动时，备份组中的Master和Backup设备必须都工作在抢占方式下。建议Backup设备配置为立即抢占，Master设置为延时抢占。

  多个VRRP备份组可以监视同一个BFD，一个VRRP备份组最多可以同时监视8个BFD会话。

## 26. 配置VRRP6与BFD联动实现快速切换
  使用VRRP6备份组监视BFD会话，在BFD会话状态改变后通知VRRP6备份组，实现VRRP6备份组的快速切换。

## 27. 配置EFM和BFD联动

